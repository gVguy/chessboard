(this.webpackJsonpbuilder=this.webpackJsonpbuilder||[]).push([[0],{23:function(e,c,i){},24:function(e,c,i){"use strict";i.r(c);i(0);var r=i(4),o=i.n(r),n=i(3);var l=i(1);function t(){var e=Object(n.b)(),c=Object(n.c)((function(e){return e})),i=c.board,r=c.currentMove,o=!0,t=Object.keys(i).map((function(n){o=!o;var t=Object.keys(i[n]).map((function(t){t=Number(t);var s=i[n][t];o=!o;var u=s.color===r.color,p=!!(c.currentMove.possibleMoves&&c.currentMove.possibleMoves.length>0)&&n===c.currentMove.currentPosition.file&&t===c.currentMove.currentPosition.square,b=c.drag.active||p||!u,d=function(c){e(function(e,c){return{type:"MOVE_START",piece:e,position:c}}(s,{file:n,square:t})),e(function(e,c,i){return{type:"DRAG_START",piece:e,position:c,mousePos:i}}(s,{file:n,square:t},[c.clientX,c.clientY]))};return Object(l.jsxs)("div",{className:"boardSquare"+(o?" dark":""),children:[s.piece?u?Object(l.jsx)("div",{className:"piece "+s.color+" clickable"+(p?" active":""),onMouseDown:d,children:a(s.piece,s.color)}):Object(l.jsx)("div",{className:"piece "+s.color,children:a(s.piece,s.color)}):"",r.currentPosition?r.possibleMoves.length&&r.possibleMoves.some((function(e){return e.file===n&&e.square===t}))?Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"ghostSquare",onMouseUp:function(){return e({type:"MOVE_MAKE",position:{file:n,square:t}})}}),Object(l.jsx)("div",{className:"greenGhostSquare"})]}):b?Object(l.jsx)("div",{className:"cancelMoveGhostSquare",onMouseUp:function(){c.drag.active&&!c.drag.cancelUnlock||e({type:"MOVE_CANCEL"})},onMouseOut:function(){c.drag.active&&e({type:"DRAG_CANCEL_UNLOCK"})}}):"":""]},n+t)}));return Object(l.jsxs)("div",{className:"boardFile",children:[Object(l.jsx)("div",{className:"boardFileTitle",children:n}),t,Object(l.jsx)("div",{className:"boardFileTitle",children:n})]},n)})),s=c.orientation,u=function(){var e=["",1,2,3,4,5,6,7,8,""].map((function(e,c){return Object(l.jsx)("div",{className:"boardRankTitle",children:e},"rank"+c)}));return Object(l.jsx)("div",{className:"boardRankTitles boardFile",children:e})},p=c.notation.map((function(e,c){var i=e.map((function(e,i){return Object(l.jsxs)("span",{className:"notationMove",children:[" ",e.move," "]},c+""+i)}));return Object(l.jsxs)("div",{className:"notationMoveContainer",children:[Object(l.jsx)("span",{className:"notationCount",children:c+1}),i]},c)}));return Object(l.jsx)("div",{className:"app",onMouseUp:function(){e({type:"DRAG_END"})},onMouseMove:function(i){c.drag.active&&e({type:"DRAG_MOVE",pos:[i.clientX,i.clientY]})},children:Object(l.jsxs)("div",{className:"boardContainer "+r.color,children:[Object(l.jsxs)("div",{className:"boardButtonsContaioner",children:[Object(l.jsx)("button",{onClick:function(){return e({type:"NEW_GAME"})},className:"boardButton",children:"New Game"}),Object(l.jsx)("button",{onClick:function(){return e({type:"ORIENTATION_FLIP"})},className:"boardButton",children:"Flip Board"}),Object(l.jsxs)("div",{onClick:function(){return e({type:"FLIP_EVERY_MOVE_TOGGLE"})},className:"boardSwitch",children:[Object(l.jsx)("div",{className:"switch"+(c.flipEveryMove?" checked":""),children:Object(l.jsx)("div",{className:"switchInnerCircle"})}),Object(l.jsx)("span",{children:"Flip by move"})]})]}),Object(l.jsxs)("div",{className:"board "+s,id:"dragRoot",children:[u(),t,u()]}),Object(l.jsx)("div",{className:"notation",children:p}),c.drag.active?Object(l.jsx)("div",{className:"draggedContainer",style:{left:c.drag.pos[0]+"px",top:c.drag.pos[1]+"px"},children:Object(l.jsx)("div",{className:"piece "+c.drag.piece.color,children:a(c.drag.piece.piece,c.drag.piece.color)})}):""]})})}var a=function(e,c){return Object(l.jsx)("img",{src:"./chess_icons/"+c+"_"+e+".svg",className:"symbol",alt:c+" "+e})};function s(){return Object(l.jsx)("div",{children:Object(l.jsx)(t,{})})}i(23);var u=i(5),p=i(10),b=i(2),d={a:{1:{piece:"R",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"R",color:"black"}},b:{1:{piece:"N",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"N",color:"black"}},c:{1:{piece:"B",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"B",color:"black"}},d:{1:{piece:"Q",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"Q",color:"black"}},e:{1:{piece:"K",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"K",color:"black"}},f:{1:{piece:"B",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"B",color:"black"}},g:{1:{piece:"N",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"N",color:"black"}},h:{1:{piece:"R",color:"white"},2:{piece:"p",color:"white"},3:{piece:null},4:{piece:null},5:{piece:null},6:{piece:null},7:{piece:"p",color:"black"},8:{piece:"R",color:"black"}}},v=function(e){return{board:JSON.parse(JSON.stringify(d)),currentMove:{color:"white",currentPosition:null,possibleMoves:null},takenPieces:{white:[],black:[]},notation:[],orientation:"white",flipEveryMove:!!e&&e.flipEveryMove,drag:{active:!1,piece:null,origin:null,pos:[0,0],cancelUnlock:!1}}};var f=function(e){return"white"===e?"black":"white"};function j(e,c,i){var r=Object.keys(i),o=Object(p.a)(Array(9).keys()).slice(1);function n(e){return r.includes(e.file)&&o.includes(e.square)&&null===i[e.file][e.square].piece}function l(c){return r.includes(c.file)&&o.includes(c.square)&&i[c.file][c.square].piece&&i[c.file][c.square].color!==e.color}function t(e,c){return r[r.indexOf(e)+c]}function a(e){for(var i=[],r={file:t(c.file,e[0]),square:c.square+e[1]};n(r);)i.push(Object(b.a)({},r)),r.file=t(r.file,e[0]),r.square+=e[1];return l(r)&&i.push(r),i}var s=[],u=[],d="white"===e.color?1:-1,v=-1*d,f=[[1,1],[1,-1],[-1,1],[-1,-1]],j=[[1,0],[-1,0],[0,1],[0,-1]];switch(e.piece){case"p":u=[{file:c.file,square:c.square+d}],("white"===e.color&&2===c.square||"black"===e.color&&7===c.square)&&u.push({file:c.file,square:c.square+2*d});for(var h=0,O=u;h<O.length;h++){var M=O[h];n(M)&&s.push(M)}for(var q=0,N=u=[{file:t(c.file,1),square:c.square+d},{file:t(c.file,-1),square:c.square+d}];q<N.length;q++){var g=N[q];l(g)&&s.push(g)}break;case"N":for(var k=0,m=u=[{file:t(c.file,1),square:c.square+2*d},{file:t(c.file,2),square:c.square+d},{file:t(c.file,-1),square:c.square+2*d},{file:t(c.file,-2),square:c.square+d},{file:t(c.file,1),square:c.square+2*v},{file:t(c.file,2),square:c.square+v},{file:t(c.file,-1),square:c.square+2*v},{file:t(c.file,-2),square:c.square+v}];k<m.length;k++){var E=m[k];(n(E)||l(E))&&s.push(E)}break;case"B":f.forEach((function(e){return s=s.concat(a(e))}));break;case"R":j.forEach((function(e){return s=s.concat(a(e))}));break;case"Q":f.concat(j).forEach((function(e){return s=s.concat(a(e))}));break;case"K":f.concat(j).forEach((function(e){return u.push({file:t(c.file,e[0]),square:c.square+e[1]})}));for(var x=0,w=u;x<w.length;x++){var y=w[x];(n(y)||l(y))&&s.push(y)}}for(var _ in s){var R=s[_];"K"===i[R.file][R.square].piece&&s.splice(_,1)}return s}var h=Object(u.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v(),c=arguments.length>1?arguments[1]:void 0;switch("NEW_GAME"===c.type&&(e=v(e)),c.type){case"MOVE_START":return Object(b.a)(Object(b.a)({},e),{},{currentMove:Object(b.a)(Object(b.a)({},e.currentMove),{},{currentPosition:c.position,possibleMoves:j(c.piece,c.position,e.board)})});case"MOVE_CANCEL":return Object(b.a)(Object(b.a)({},e),{},{currentMove:Object(b.a)(Object(b.a)({},e.currentMove),{},{currentPosition:null,possibleMoves:null})});case"MOVE_MAKE":var i=Object(b.a)({},e.board),r=[e.currentMove.currentPosition,c.position],o=r[0],n=r[1],l=i[o.file][o.square],t="white"===e.currentMove.color?"black":"white",a=i[n.file][n.square].piece,s=Object(b.a)({},e.takenPieces);function u(){var e="";return"p"===l.piece?o.file!==n.file&&(e+=o.file):e+=l.piece,a&&(e+="x"),{move:e+=n.file+n.square}}a&&s[e.currentMove.color].push(a),i[n.file][n.square]=l,i[o.file][o.square]={piece:null};var d=Object(p.a)(e.notation);return d.length&&d[d.length-1].length<2?d[d.length-1].push(u()):d.push([u()]),Object(b.a)(Object(b.a)({},e),{},{currentMove:{color:t,currentPosition:null,possibleMoves:null},takenPieces:s,board:i,notation:d,orientation:e.flipEveryMove?f(e.orientation):e.orientation});case"ORIENTATION_FLIP":return Object(b.a)(Object(b.a)({},e),{},{flipEveryMove:!1,orientation:f(e.orientation)});case"FLIP_EVERY_MOVE_TOGGLE":return Object(b.a)(Object(b.a)({},e),{},{orientation:e.currentMove.color,flipEveryMove:!e.flipEveryMove});case"DRAG_START":return console.log("drag start"),Object(b.a)(Object(b.a)({},e),{},{drag:{active:!0,piece:c.piece,origin:c.position,pos:c.mousePos,cancelUnlock:!1}});case"DRAG_END":return e.drag.active?(console.log("drag end"),Object(b.a)(Object(b.a)({},e),{},{drag:{active:!1,piece:null,origin:null,pos:[0,0],cancelUnlock:!1}})):e;case"DRAG_MOVE":return Object(b.a)(Object(b.a)({},e),{},{drag:Object(b.a)(Object(b.a)({},e.drag),{},{pos:c.pos})});case"DRAG_CANCEL_UNLOCK":return Object(b.a)(Object(b.a)({},e),{},{drag:Object(b.a)(Object(b.a)({},e.drag),{},{cancelUnlock:!0})});default:return e}}));o.a.render(Object(l.jsx)(n.a,{store:h,children:Object(l.jsx)(s,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.e5313557.chunk.js.map